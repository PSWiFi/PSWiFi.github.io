<!DOCTYPE html>
<html>

<head>
  <link rel="icon" href="../favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <title>Form | P.A.C.T</title>
</head>

<body class="bg-light">

  <div class="bg-dark title sticky-top">
    <h1 class="text-light text-center pt-3 pb-3">P.A.C.T. Form</h1>
  </div>

  <div class="text-dark container" style="max-width: 700px;">
    <br />
    <form>
      <!-- Species -->
      <div class="form-group">
        <label for="species">Pok&eacute;mon Species</label>
        <select class="form-control" id="species">
          <option value=" ">Select one...</option>
        </select>
      </div>

      <!-- Shiny -->
      <div class="form-group">
        <label for="shiny-radio-container">Shiny?</label>
        <div id="shiny-radio-container">
          <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" id="nonShiny" name="shinyRadioButton" class="custom-control-input" checked="true">
            <label class="custom-control-label" for="nonShiny">Not Shiny</label>
          </div>
          <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" id="starShiny" name="shinyRadioButton" class="custom-control-input">
            <label class="custom-control-label" for="starShiny">&#x2605; Star Shiny</label>
          </div>
          <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" id="squareShiny" name="shinyRadioButton" class="custom-control-input">
            <label class="custom-control-label" for="squareShiny">&#x25A0; Square Shiny</label>
          </div>
        </div>
      </div>

      <!-- Ball -->
      <div class="form-group">
        <label for="ball">Pok&eacute;ball</label>
        <select class="form-control" id="ball">
          <option value=" ">Select one...</option>
          <option value="Beast">Beast</option>
          <option value="Cherish">Cherish</option>
          <option value="Dive">Dive</option>
          <option value="Dream">Dream</option>
          <option value="Dusk">Dusk</option>
          <option value="Fast">Fast</option>
          <option value="Friend">Friend</option>
          <option value="Great">Great</option>
          <option value="Heal">Heal</option>
          <option value="Heavy">Heavy</option>
          <option value="Level">Level</option>
          <option value="Love">Love</option>
          <option value="Lure">Lure</option>
          <option value="Luxury">Luxury</option>
          <option value="Master">Master</option>
          <option value="Moon">Moon</option>
          <option value="Nest">Nest</option>
          <option value="Net">Net</option>
          <option value="Poke">Pok&eacute;</option>
          <option value="Premier">Premier</option>
          <option value="Quick">Quick</option>
          <option value="Repeat">Repeat</option>
          <option value="Safari">Safari</option>
          <option value="Sport">Sport</option>
          <option value="Timer">Timer</option>
          <option value="Ultra">Ultra</option>
        </select>
      </div>

      <!-- Nature -->
      <div class="form-group">
        <label for="nature">Nature</label>
        <select class="form-control" id="nature">
          <option value=" ">Select one...</option>
          <option value="Hardy">Hardy</option>
          <option value="Lonely">Lonely</option>
          <option value="Brave">Brave</option>
          <option value="Adamant">Adamant</option>
          <option value="Naughty">Naughty</option>
          <option value="Bold">Bold</option>
          <option value="Docile">Docile</option>
          <option value="Relaxed">Relaxed</option>
          <option value="Impish">Impish</option>
          <option value="Lax">Lax</option>
          <option value="Timid">Timid</option>
          <option value="Hasty">Hasty</option>
          <option value="Serious">Serious</option>
          <option value="Jolly">Jolly</option>
          <option value="Naive">Naive</option>
          <option value="Modest">Modest</option>
          <option value="Mild">Mild</option>
          <option value="Quiet">Quiet</option>
          <option value="Bashful">Bashful</option>
          <option value="Rash">Rash</option>
          <option value="Calm">Calm</option>
          <option value="Gentle">Gentle</option>
          <option value="Sassy">Sassy</option>
          <option value="Careful">Careful</option>
          <option value="Quirky">Quirky</option>
        </select>
      </div>

      <!-- Ability -->
      <div class="form-group">
        <label for="ability">Ability</label>
        <select class="form-control" id="ability">
          <option value=" ">Select one...</option>
        </select>
      </div>

      <!-- OT -->
      <div class="form-group">
        <label for="ability">OT Name</label>
        <input class="form-control" type="text" id="ot" placeholder="Ash (Case Sensitive)">
      </div>

      <!-- TID -->
      <div class="form-group">
        <label for="tid">Trainer ID</label>
        <input class="form-control" type="text" id="tid" placeholder="123456">
      </div>

      <!-- IVs -->
      <div class="form-group">
        <div class="form-row">
          <div class="col">
            <label for="hp">HP IV</label>
            <select class="form-control" id="hp">
              <option value=" ">-</option>
              <option value="HT">HT</option>
              <option value="B">B</option>
              <option value="F">F</option>
              <option value="VG">VG</option>
              <option value="PG">PG</option>
              <option value="D">D</option>
              <option value="NG">NG</option>
            </select>
          </div>
          <div class="col">
            <label for="atk">Atk IV</label>
            <select class="form-control" id="atk">
              <option value=" ">-</option>
              <option value="HT">HT</option>
              <option value="B">B</option>
              <option value="F">F</option>
              <option value="VG">VG</option>
              <option value="PG">PG</option>
              <option value="D">D</option>
              <option value="NG">NG</option>
            </select>
          </div>
          <div class="col">
            <label for="def">Def IV</label>
            <select class="form-control" id="def">
              <option value=" ">-</option>
              <option value="HT">HT</option>
              <option value="B">B</option>
              <option value="F">F</option>
              <option value="VG">VG</option>
              <option value="PG">PG</option>
              <option value="D">D</option>
              <option value="NG">NG</option>
            </select>
          </div>
          <div class="col">
            <label for="spa">Sp. Atk IV</label>
            <select class="form-control" id="spa">
              <option value=" ">-</option>
              <option value="HT">HT</option>
              <option value="B">B</option>
              <option value="F">F</option>
              <option value="VG">VG</option>
              <option value="PG">PG</option>
              <option value="D">D</option>
              <option value="NG">NG</option>
            </select>
          </div>
          <div class="col">
            <label for="spd">Sp. Def IV</label>
            <select class="form-control" id="spd">
              <option value=" ">-</option>
              <option value="HT">HT</option>
              <option value="B">B</option>
              <option value="F">F</option>
              <option value="VG">VG</option>
              <option value="PG">PG</option>
              <option value="D">D</option>
              <option value="NG">NG</option>
            </select>
          </div>
          <div class="col">
            <label for="spe">Spe IV</label>
            <select class="form-control" id="spe">
              <option value=" ">-</option>
              <option value="HT">HT</option>
              <option value="B">B</option>
              <option value="F">F</option>
              <option value="VG">VG</option>
              <option value="PG">PG</option>
              <option value="D">D</option>
              <option value="NG">NG</option>
            </select>
          </div>
        </div>
        <small id="ivDesc" class="form-text text-muted"> HT: Hyper Trained | 31: B | 30: F | 26-29: VG | 16-25: PG | 1-15: D | 0: NG</small>
      </div>

      <!-- Language -->
      <div class="form-group">
        <label for="language">Language</label>
        <select class="form-control" id="language">
          <option value=" ">Select one...</option>
          <option value="ENG">ENG</option>
          <option value="SPA">SPA</option>
          <option value="JPN">JPN</option>
          <option value="FRE">FRE</option>
          <option value="GER">GER</option>
          <option value="ITA">ITA</option>
          <option value="KOR">KOR</option>
          <option value="CHS">CHS</option>
          <option value="CHT">CHT</option>
        </select>
      </div>

      <!-- Nickname -->
      <div class="form-group">
        <label for="nickname">Nickname</label>
        <input class="form-control" type="text" id="nickname" placeholder="Agumon (Case Sensitive)">
        <small id="nickDesc" class="form-text text-muted">Please leave this blank if it doesn't have one!</small>
      </div>

      <!-- Level -->
      <div class="form-group">
        <label for="nickname">Level</label>
        <input class="form-control" type="text" id="level" placeholder="Level" value="100">
      </div>

      <!-- Gender -->
      <div class="form-group">
        <label for="gender">Gender</label>
        <select class="form-control" id="gender">
          <option value=" ">Select One...</option>
          <option value="M">Male (&#x2642;)</option>
          <option value="F">Female (&#x2640;)</option>
          <option value="-">Genderless</option>
        </select>
      </div>

      <!-- Origin -->
      <div class="form-group">
        <label for="origin">Origin Stamp</label>
        <select class="form-control" id="origin">
          <option value=" ">Select one...</option>
          <option value="Galar">Galar</option>
          <option value="LGPE">LGPE</option>
          <option value="POGO">POGO</option>
          <option value="Alola">Alola</option>
          <option value="Gen 6">Gen 6 Pentagon</option>
          <option value="VC">VC</option>
          <option value="None">None</option>
        </select>
      </div>

      <!-- Moves -->
      <div class="form-group">
        <div class="form-row">
          <div class="col">
            <label for="move1">Move 1</label>
            <select class="form-control" id="move1">
              <option value=" ">(No move)</option>
            </select>
          </div>
          <div class="col">
            <label for="move2">Move 2</label>
            <select class="form-control" id="move2">
              <option value=" ">(No move)</option>
            </select>
          </div>
          <div class="col">
            <label for="move3">Move 3</label>
            <select class="form-control" id="move3">
              <option value=" ">(No move)</option>
            </select>
          </div>
          <div class="col">
            <label for="move4">Move 4</label>
            <select class="form-control" id="move4">
              <option value=" ">(No move)</option>
            </select>
          </div>
        </div>
        <small id="movesDesc" class="form-text text-muted">Please list the moves on your Pok&eacute;mon.</small>
      </div>

      <!-- Ribbons/Marks -->
      <div class="form-group">
        <label for="ribmark">Ribbons &amp; Marks</label>
        <input class="form-control" type="text" id="ribmark" placeholder="Ribbon/Mark Name">
        <small id="ribbonDesc" class="form-text text-muted">Leave this blank if it doesn't have any!</small>
      </div>

      <!-- Encounter Description -->
      <div class="form-group">
        <label for="encounter">Encounter Description</label>
        <textarea class="form-control" id="encounter" rows="4"></textarea>
        <small id="encounterDesc" class="form-text text-muted">Please copy the text from the second-last page of your Pok&eacute;mon's summary in full.</small>
      </div>

      <!-- History -->
      <div class="form-group">
        <label for="previous">History</label>
        <input class="form-control" type="text" id="previous" placeholder="Skadiv#6984 from the &quot;Akala Meadow&quot; Discord server">
        <small id="historyDesc" class="form-text text-muted">What user did you get this Pok&eacute;mon from? State the method if you don't remember.</small>
      </div>
    </form>
    <br>

    <button type="button" class="btn btn-outline-primary btn-block" onclick="submit()">Submit</button>

    <div class="w-100 pt-3 d-none" id="prompt">Please copy ALL of the output below and paste it in #requests.</div>
    <br />
    <textarea class="form-control d-none" id="result" rows="7" cols="60"></textarea><br>

  </div>

  <script>
    function submit() {
      var speciesSelect = document.getElementById("species");
      var species = speciesSelect[speciesSelect.selectedIndex].value;
      var ballSelect = document.getElementById("ball");
      var ball = ballSelect[ballSelect.selectedIndex].value;
      var natureSelect = document.getElementById("nature");
      var nature = natureSelect[natureSelect.selectedIndex].value;
      var ability = document.getElementById("ability").value;
      var ot = document.getElementById("ot").value;
      var tid = document.getElementById("tid").value;
      var hpSelect = document.getElementById("hp");
      var hp = hpSelect[hpSelect.selectedIndex].value;
      var atkSelect = document.getElementById("atk");
      var atk = atkSelect[atkSelect.selectedIndex].value;
      var defSelect = document.getElementById("def");
      var def = defSelect[defSelect.selectedIndex].value;
      var spaSelect = document.getElementById("spa");
      var spa = spaSelect[spaSelect.selectedIndex].value;
      var spdSelect = document.getElementById("spd");
      var spd = spdSelect[spdSelect.selectedIndex].value;
      var speSelect = document.getElementById("spe");
      var spe = speSelect[speSelect.selectedIndex].value;
      var languageSelect = document.getElementById("language");
      var language = languageSelect[languageSelect.selectedIndex].value;
      var nickname = document.getElementById("nickname").value;
      var level = document.getElementById("level").value;
      var genderSelect = document.getElementById("gender");
      var gender = genderSelect[genderSelect.selectedIndex].value;
      var originSelect = document.getElementById("origin");
      var origin = originSelect[originSelect.selectedIndex].value;
      var move1 = document.getElementById("move1").value;
      var move2 = document.getElementById("move2").value;
      var move3 = document.getElementById("move3").value;
      var move4 = document.getElementById("move4").value;
      var ribmark = document.getElementById("ribmark").value;
      var encounter = document.getElementById("encounter").value;
      var previous = document.getElementById("previous").value;
      var result = document.getElementById("result");


      if (species == " ") {
        alert("Species can't be empty!");
        return;
      }

      if (ball == " ") {
        alert("Ball can't be empty!");
        return;
      }

      if (nature == " ") {
        alert("Nature can't be empty!");
        return;
      }

      if (ability == "") {
        alert("Ability can't be empty!");
        return;
      }

      if (ot == "") {
        alert("OT can't be empty!");
        return;
      }

      if (tid == "") {
        alert("ID No. can't be empty!");
        return;
      }

      if (hp == " ") {
        alert("IVs can't be empty!");
        return;
      }

      if (atk == " ") {
        alert("IVs can't be empty!");
        return;
      }

      if (def == " ") {
        alert("IVs can't be empty!");
        return;
      }

      if (spa == " ") {
        alert("IVs can't be empty!");
        return;
      }

      if (spd == " ") {
        alert("IVs can't be empty!");
        return;
      }

      if (spe == " ") {
        alert("IVs can't be empty!");
        return;
      }

      if (language == " ") {
        alert("Language can't be empty!");
        return;
      }

      if (level == "") {
        alert("Level can't be empty!");
        return;
      }

      if (origin == " ") {
        alert("Origin Stamp can't be empty! Select 'None' if it doesn't have one.");
        return;
      }

      if (encounter == "") {
        alert("Encounter Description can't be empty!");
        return;
      }

      if (gender == " ") {
        alert("Level can't be empty!");
        return;
      }

      if (move1 == "") {
        alert("Moveset can't be empty!");
        return;
      }

      if (previous == "") {
        alert("History can't be empty!");
        return;
      }

      result.value = "";

      if (nickname != "") {
        result.value += nickname + " the ";
      }
      if (document.getElementById("starShiny").checked) {
        result.value += "\u{2605} - ";
      }
      if (document.getElementById("squareShiny").checked) {
        result.value += "\u{25A0} - ";
      }

      result.value += species + " (" + gender + ")" + "\n";
      result.value += "```\n";
      result.value += "Pokeball:      " + ball + "\n";
      result.value += "Nature:        " + nature + "\n";
      result.value += "Ability:       " + ability + "\n";
      result.value += "OT:            " + ot + "\n";
      result.value += "ID No.:        " + tid + "\n";
      result.value += "IVs:           " + hp + "/" + atk + "/" + def + "/" + spa + "/" + spd + "/" + spe + "\n";
      result.value += "Language:      " + language + "\n";
      result.value += "Level:         " + level + "\n";
      result.value += "Origin Stamp:  " + origin + "\n";
      result.value += "Moves:         " + move1 + "\n";
      if (move2 != "") {
        result.value += "               " + move2 + "\n";
      }

      if (move3 != "") {
        result.value += "               " + move3 + "\n";
      }

      if (move4 != "") {
        result.value += "               " + move4 + "\n";
      }

      if (ribmark != "") {
        result.value += "Ribbons/Marks: " + ribmark + "\n";
      }


      result.value += "Obtained From: " + previous + "\n";
      result.value += "Encounter:     " + encounter + "```\n";

      // Unhide results
      $("#prompt").removeClass("d-none");
      $("#result").removeClass("d-none");

      // Copy to clipboard
      $("#result").select();
      document.execCommand("copy");
    }
  </script>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

  <script src="./data/pokedex.js"></script>
  <script src="./data/learnsets.js"></script>
  <script src="./data/moves.js"></script>
  <script>
    $(function() {
      var dex = Object.keys(Pokedex).sort();
      for (var i = 0; i < dex.length; i++) {
        var pokemon = Pokedex[dex[i]];

        // Filter Pokemon
        //////////////////

        // Alt formes
        if (pokemon.baseSpecies && pokemon.baseSpecies !== pokemon.name) continue;
        // CAP
        if (pokemon.num < 0) continue;

        // Passes filter, add to species select
        $("#species").append("<option value=\"" + pokemon.name + "\">" + pokemon.name + "</option>");
      }
      $("#species").change();
    });

    $("#species").on("change", function() {
      var monName = $(this).children("option:selected").val().toLowerCase().replace(/[^a-z0-9]/g, "");
      var pokemon = Pokedex[monName];
      if (monName && pokemon) {
        // Populate Abilities
        $("#ability").html("<option value=\" \">Select one...</option>");
        var abilities = Object.values(pokemon.abilities);
        for (var i = 0; i < abilities.length; i++) {
          $("#ability").append("<option value=\"" + abilities[i] + "\">" + abilities[i] + "</option>");
        }

        // Populate Moves
        for (var i = 1; i < 5; i++) {
          $("#move" + i).html("<option value=\" \">(No Move)</option>");
          var set = Object.keys(Learnsets[monName].learnset);
          for (var j = 0; j < set.length; j++) {
            var move = Moves[set[j]].name;
            // Filter out CAP moves
            if (move.isNonstandard && move.isNonstandard === "CAP") continue;
            $("#move" + i).append("<option value=\"" + move + "\">" + move + "</option>");
          }
        }

        // Populate Gender
        if (pokemon.gender) {
          if (pokemon.gender === "F") {
            $("#gender").html("<option value=\" \">Select One...</option><option value=\"F\">Female (&#x2640;)</option>");
          } else if (pokemon.gender === "M") {
            $("#gender").html("<option value=\" \">Select One...</option><option value=\"M\">Male (&#x2642;)</option>");
          } else if (pokemon.gender === "N") {
            $("#gender").html("<option value=\" \">Select One...</option><option value=\"-\">Genderless</option>");
          } else {
            $("#gender").html("<option value=\" \">Select One...</option><option value=\"F\">Female (&#x2640;)</option><option value=\"M\">Male (&#x2642;)</option><option value=\"-\">Genderless</option>");
          }
        } else {
          $("#gender").html("<option value=\" \">Select One...</option><option value=\"F\">Female (&#x2640;)</option><option value=\"M\">Male (&#x2642;)</option><option value=\"-\">Genderless</option>");
        }
      } else {
        // Reset fields
        $("#ability").html("<option value=\" \">Select one...</option>");
        $("#gender").html("<option value=\" \">Select One...</option><option value=\"F\">Female (&#x2640;)</option><option value=\"M\">Male (&#x2642;)</option><option value=\"-\">Genderless</option>");
        for (var i = 1; i < 5; i++) {
          $("#move" + i).html("<option value=\" \">(No Move)</option>");
        }
      }
    });

    // Validate TID
    $("#tid").on("keyup keydown", function() {
      var testArr = $("#tid").val().split("");
      var resultArr = [];
      var isNum = new RegExp("[0-9]+");
      for (var i in testArr) {
        if (isNum.test(testArr[i]) && i < 6) {
          resultArr.push(testArr[i]);
        }
        $("#tid").val(resultArr.join(""));
      }
    });

    // Validate Level
    $("#level").on("keyup keydown", function() {
      var testArr = $("#level").val().split("");
      var resultArr = [];
      var isNum = new RegExp("[0-9]+");
      for (var i in testArr) {
        if (isNum.test(testArr[i]) && i < 3) {
          resultArr.push(testArr[i]);
        }
      }
      $("#level").val(resultArr.join(""));
      if (resultArr.length !== 0) {
        var newNum = parseInt(resultArr.join(""));
        $("#level").val(Math.min(100, newNum));
      }
    });
  </script>
</body>

</html>